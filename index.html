<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeAI Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        .strategy-card {
            transition: all 0.3s ease;
        }
        .strategy-card:hover {
            transform: translateY(-4px);
        }
    </style>
</head>
<body class="min-h-screen text-slate-100">
    <div id="app"></div>

    <script>
        const app = {
            strategies: [
                { id: 1, name: 'RSI Scalper', status: 'running', mode: 'trading', pnl: 1234.50, code: 'def strategy():\n    if rsi < 30:\n        return "BUY"\n    elif rsi > 70:\n        return "SELL"' },
                { id: 2, name: 'MA Cross', status: 'running', mode: 'signal', pnl: 892.30, code: 'def strategy():\n    if ma_fast > ma_slow:\n        return "BUY"' },
                { id: 3, name: 'Breakout Hunter', status: 'stopped', mode: 'trading', pnl: -156.20, code: '' }
            ],
            notifications: [
                { id: 1, type: 'buy', message: 'BTC/USDT @ $43,250', strategy: 'RSI Scalper', time: '2 min ago' },
                { id: 2, type: 'sell', message: 'ETH/USDT @ $2,280', strategy: 'MA Cross', time: '5 min ago' }
            ],
            showNotifications: false,
            showAddStrategy: false,
            editingStrategy: null,
            newStrategy: { name: '', code: '', mode: 'signal' }
        };

        function render() {
            const totalPnL = app.strategies.reduce((sum, s) => sum + s.pnl, 0);
            const runningCount = app.strategies.filter(s => s.status === 'running').length;

            document.getElementById('app').innerHTML = `
                <!-- Navbar -->
                <nav class="bg-slate-900/80 backdrop-blur-xl border-b border-blue-500/20 sticky top-0 z-50">
                    <div class="px-6 py-4 flex justify-between items-center">
                        <div class="flex items-center gap-2 text-2xl font-bold">
                            <span class="text-blue-500">‚ö°</span>
                            <span class="bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent">
                                TradeAI Pro
                            </span>
                        </div>
                        
                        <div class="flex items-center gap-4">
                            <button onclick="toggleNotifications()" class="relative p-2 hover:bg-slate-800 rounded-lg transition-all">
                                <span class="text-2xl">üîî</span>
                                ${app.notifications.length > 0 ? `
                                    <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center">
                                        ${app.notifications.length}
                                    </span>
                                ` : ''}
                            </button>
                            <div class="flex items-center gap-2 bg-slate-800 px-4 py-2 rounded-lg">
                                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center font-bold text-sm">
                                    JD
                                </div>
                                <span class="text-sm hidden md:block">john@gmail.com</span>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- Notifications Panel -->
                ${app.showNotifications ? `
                    <div class="fixed right-4 top-20 w-96 max-w-[90vw] bg-slate-800 border border-blue-500/20 rounded-xl shadow-2xl z-50 max-h-[500px] overflow-y-auto">
                        <div class="p-4 border-b border-slate-700 flex justify-between items-center sticky top-0 bg-slate-800">
                            <h3 class="font-bold">üîî Notifications</h3>
                            <button onclick="toggleNotifications()" class="hover:text-red-400">‚úï</button>
                        </div>
                        <div class="p-2">
                            ${app.notifications.length === 0 ? 
                                '<p class="text-center text-slate-400 py-8">No notifications</p>' :
                                app.notifications.map(notif => `
                                    <div class="p-3 mb-2 rounded-lg border-l-4 ${
                                        notif.type === 'buy' ? 'bg-green-500/10 border-green-500' :
                                        notif.type === 'sell' ? 'bg-red-500/10 border-red-500' :
                                        'bg-blue-500/10 border-blue-500'
                                    }">
                                        <div class="flex justify-between items-start mb-1">
                                            <span class="font-bold text-sm ${
                                                notif.type === 'buy' ? 'text-green-400' :
                                                notif.type === 'sell' ? 'text-red-400' :
                                                'text-blue-400'
                                            }">
                                                ${notif.type.toUpperCase()}
                                            </span>
                                            <span class="text-xs text-slate-400">${notif.time}</span>
                                        </div>
                                        <p class="text-sm">${notif.message}</p>
                                        <p class="text-xs text-slate-400 mt-1">${notif.strategy}</p>
                                    </div>
                                `).join('')
                            }
                        </div>
                    </div>
                ` : ''}

                <!-- Main Content -->
                <div class="container mx-auto px-4 py-6">
                    <!-- Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-slate-800/50 backdrop-blur-xl border border-blue-500/20 rounded-xl p-4 md:p-6">
                            <p class="text-slate-400 text-xs md:text-sm mb-2">Total PnL</p>
                            <p class="text-2xl md:text-3xl font-bold ${totalPnL >= 0 ? 'text-green-400' : 'text-red-400'}">
                                $${totalPnL.toFixed(2)}
                            </p>
                        </div>
                        <div class="bg-slate-800/50 backdrop-blur-xl border border-blue-500/20 rounded-xl p-4 md:p-6">
                            <p class="text-slate-400 text-xs md:text-sm mb-2">Active</p>
                            <p class="text-2xl md:text-3xl font-bold">${runningCount}</p>
                        </div>
                        <div class="bg-slate-800/50 backdrop-blur-xl border border-blue-500/20 rounded-xl p-4 md:p-6">
                            <p class="text-slate-400 text-xs md:text-sm mb-2">Trades</p>
                            <p class="text-2xl md:text-3xl font-bold">1,847</p>
                        </div>
                        <div class="bg-slate-800/50 backdrop-blur-xl border border-blue-500/20 rounded-xl p-4 md:p-6">
                            <p class="text-slate-400 text-xs md:text-sm mb-2">Win Rate</p>
                            <p class="text-2xl md:text-3xl font-bold">68.5%</p>
                        </div>
                    </div>

                    <!-- Strategies -->
                    <div class="bg-slate-800/50 backdrop-blur-xl border border-blue-500/20 rounded-xl p-4 md:p-6">
                        <div class="flex justify-between items-center mb-6 flex-wrap gap-4">
                            <h2 class="text-xl md:text-2xl font-bold flex items-center gap-2">
                                <span class="text-blue-500">üìä</span>
                                My Strategies
                            </h2>
                            <button
                                onclick="showAddStrategyModal()"
                                class="flex items-center gap-2 bg-gradient-to-r from-blue-500 to-purple-500 px-4 py-2 rounded-lg font-semibold hover:shadow-lg hover:shadow-blue-500/50 transition-all text-sm md:text-base"
                            >
                                <span>+</span> Add Strategy
                            </button>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4">
                            ${app.strategies.map(strategy => `
                                <div class="strategy-card bg-slate-900/50 border border-slate-700 rounded-xl p-5 hover:border-blue-500/50">
                                    <div class="flex justify-between items-start mb-4">
                                        <h3 class="font-bold text-base md:text-lg">${strategy.name}</h3>
                                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${
                                            strategy.status === 'running' 
                                                ? 'bg-green-500/20 text-green-400 border border-green-500/50' 
                                                : 'bg-red-500/20 text-red-400 border border-red-500/50'
                                        }">
                                            ${strategy.status}
                                        </span>
                                    </div>

                                    <div class="mb-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="text-sm text-slate-400">Mode:</span>
                                            <button
                                                onclick="toggleMode(${strategy.id})"
                                                class="px-3 py-1 rounded-lg text-xs font-semibold transition-all ${
                                                    strategy.mode === 'trading'
                                                        ? 'bg-purple-500/20 text-purple-400 border border-purple-500/50'
                                                        : 'bg-blue-500/20 text-blue-400 border border-blue-500/50'
                                                }"
                                            >
                                                ${strategy.mode === 'trading' ? 'üí∞ Trading' : 'üìä Signal Only'}
                                            </button>
                                        </div>
                                        <p class="text-xl md:text-2xl font-bold ${strategy.pnl >= 0 ? 'text-green-400' : 'text-red-400'}">
                                            ${strategy.pnl >= 0 ? '+' : ''}$${strategy.pnl.toFixed(2)}
                                        </p>
                                    </div>

                                    <div class="flex gap-2">
                                        <button
                                            onclick="toggleStatus(${strategy.id})"
                                            class="flex-1 py-2 rounded-lg font-semibold transition-all text-sm ${
                                                strategy.status === 'running'
                                                    ? 'bg-red-500/20 text-red-400 hover:bg-red-500/30'
                                                    : 'bg-green-500/20 text-green-400 hover:bg-green-500/30'
                                            }"
                                        >
                                            ${strategy.status === 'running' ? 'Stop' : 'Start'}
                                        </button>
                                        <button
                                            onclick="editStrategy(${strategy.id})"
                                            class="px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-all text-sm"
                                        >
                                            üìù
                                        </button>
                                        <button
                                            onclick="deleteStrategy(${strategy.id})"
                                            class="px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-all text-sm"
                                        >
                                            üóëÔ∏è
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <!-- Add/Edit Strategy Modal -->
                ${app.showAddStrategy || app.editingStrategy ? `
                    <div class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
                        <div class="bg-slate-800 border border-blue-500/20 rounded-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
                            <div class="p-6 border-b border-slate-700 flex justify-between items-center sticky top-0 bg-slate-800 z-10">
                                <h2 class="text-xl md:text-2xl font-bold flex items-center gap-2">
                                    <span>üìù</span>
                                    ${app.editingStrategy ? 'Edit Strategy' : 'Add New Strategy'}
                                </h2>
                                <button onclick="closeModal()" class="hover:text-red-400 transition-colors text-2xl">
                                    ‚úï
                                </button>
                            </div>

                            <div class="p-6 space-y-4">
                                <div>
                                    <label class="block text-sm font-semibold mb-2">Strategy Name</label>
                                    <input
                                        type="text"
                                        id="strategyName"
                                        value="${app.newStrategy.name}"
                                        placeholder="e.g., RSI Scalper"
                                        class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 text-slate-100"
                                    />
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold mb-2">Mode</label>
                                    <div class="flex gap-4 flex-wrap">
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input
                                                type="radio"
                                                name="mode"
                                                value="signal"
                                                ${app.newStrategy.mode === 'signal' ? 'checked' : ''}
                                                class="w-4 h-4"
                                            />
                                            <span class="text-sm">üìä Signal Only</span>
                                        </label>
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input
                                                type="radio"
                                                name="mode"
                                                value="trading"
                                                ${app.newStrategy.mode === 'trading' ? 'checked' : ''}
                                                class="w-4 h-4"
                                            />
                                            <span class="text-sm">üí∞ Trading Mode</span>
                                        </label>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold mb-2">Python Strategy Code</label>
                                    <textarea
                                        id="strategyCode"
                                        placeholder="def strategy():
    # Your strategy logic here
    if condition:
        return 'BUY'
    elif other_condition:
        return 'SELL'
    return 'HOLD'"
                                        class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 font-mono text-sm focus:outline-none focus:border-blue-500 h-64 text-slate-100"
                                    >${app.newStrategy.code}</textarea>
                                    <p class="text-xs text-slate-400 mt-2">
                                        ‚ÑπÔ∏è Write your strategy in Python. Return BUY/SELL/HOLD signals.
                                    </p>
                                </div>

                                <button
                                    onclick="saveStrategy()"
                                    class="w-full bg-gradient-to-r from-blue-500 to-purple-500 py-3 rounded-lg font-bold hover:shadow-lg hover:shadow-blue-500/50 transition-all"
                                >
                                    ${app.editingStrategy ? 'Update Strategy' : 'Create Strategy'}
                                </button>
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function toggleNotifications() {
            app.showNotifications = !app.showNotifications;
            render();
        }

        function showAddStrategyModal() {
            app.showAddStrategy = true;
            app.newStrategy = { name: '', code: '', mode: 'signal' };
            render();
        }

        function closeModal() {
            app.showAddStrategy = false;
            app.editingStrategy = null;
            app.newStrategy = { name: '', code: '', mode: 'signal' };
            render();
        }

        function toggleStatus(id) {
            const strategy = app.strategies.find(s => s.id === id);
            strategy.status = strategy.status === 'running' ? 'stopped' : 'running';
            addNotification('info', `${strategy.name} ${strategy.status}`, strategy.name);
            render();
        }

        function toggleMode(id) {
            const strategy = app.strategies.find(s => s.id === id);
            strategy.mode = strategy.mode === 'trading' ? 'signal' : 'trading';
            addNotification('info', `${strategy.name} switched to ${strategy.mode} mode`, strategy.name);
            render();
        }

        function editStrategy(id) {
            const strategy = app.strategies.find(s => s.id === id);
            app.editingStrategy = id;
            app.newStrategy = { name: strategy.name, code: strategy.code, mode: strategy.mode };
            render();
        }

        function deleteStrategy(id) {
            const strategy = app.strategies.find(s => s.id === id);
            app.strategies = app.strategies.filter(s => s.id !== id);
            addNotification('info', `${strategy.name} deleted`, strategy.name);
            render();
        }

        function saveStrategy() {
            const name = document.getElementById('strategyName').value;
            const code = document.getElementById('strategyCode').value;
            const mode = document.querySelector('input[name="mode"]:checked').value;

            if (!name || !code) {
                alert('Please fill in all fields');
                return;
            }

            if (app.editingStrategy) {
                const strategy = app.strategies.find(s => s.id === app.editingStrategy);
                strategy.name = name;
                strategy.code = code;
                strategy.mode = mode;
                addNotification('success', `${name} updated`, name);
            } else {
                app.strategies.push({
                    id: Date.now(),
                    name,
                    code,
                    mode,
                    status: 'stopped',
                    pnl: 0
                });
                addNotification('success', `${name} created`, name);
            }

            closeModal();
        }

        function addNotification(type, message, strategy) {
            app.notifications.unshift({
                id: Date.now(),
                type,
                message,
                strategy,
                time: 'Just now'
            });
            if (app.notifications.length > 10) {
                app.notifications.pop();
            }
            render();
        }

        // Auto-update PnL for running strategies
        setInterval(() => {
            const running = app.strategies.filter(s => s.status === 'running' && s.mode === 'trading');
            if (running.length > 0) {
                const randomStrategy = running[Math.floor(Math.random() * running.length)];
                const change = (Math.random() - 0.4) * 100;
                randomStrategy.pnl = +(randomStrategy.pnl + change).toFixed(2);
                
                if (Math.random() > 0.7) {
                    addNotification(
                        change > 0 ? 'buy' : 'sell',
                        `BTC/USDT @ $${(43000 + Math.random() * 1000).toFixed(0)}`,
                        randomStrategy.name
                    );
                }
                render();
            }
        }, 5000);

        // Initial render
        render();
    </script>
</body>
</html>
